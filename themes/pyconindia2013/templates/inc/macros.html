{% macro render_sponsor(name, klass) -%}
  {% set node = fragment('2013', name) %}
  {% if node %}
    {% set website = node.properties.get("website") %}
    {% set image_url = node.properties.get("image") %}
    {% set has_content = False and node.properties.get("content") != "false" %}
    {% if has_content %}
      <a data-toggle="modal" href="#{{name}}"><img class="{{klass}}" alt="{{node.title}}" src="{{ image_url }}"></a>
    {% else %}
      <a href="{{website}}"><img class="{{klass}}" alt="{{node.title}}" src="{{ image_url }}"></a>
    {% endif %}
  {% else %}
  {% endif %}
{%- endmacro %}

{% macro render_sponsor_popup(name, klass) -%}
  {% set node = fragment('2013', name) %}
  {% if node %}
    {% set website = node.properties.get("website") %}
    {% set image_url = node.properties.get("image") %}
    {% set has_content = False and node.properties.get("content") != "false" %}
    {% if has_content %}
      <div class="modal fade sponsor-box" id="{{name}}">
        <div class="modal-header">
          <a class="close" data-dismiss="modal">&times;</a>
          <h3>{{node.title}}</h3>
        </div>
        <div class="modal-body">
          {{ node.content }}
        </div>
        <div class="modal-footer">
          <a href="{{website}}" class="btn btn-primary sponsor-exit">Visit {{node.title}}</a>
          <a data-dismiss="modal" class="btn">Close</a>
        </div>
      </div>
    {% endif %}
  {% else %}
  {% endif %}
{%- endmacro %}

{% macro render_sponsor_row(key, prefix, klass) -%}
    {% set root = getnode("2013", "") %}
    {% set names = root.properties.get(key) and root.properties.get(key).split(",") or [] %}
    {% for name in names %}
        {{ render_sponsor(prefix + name, klass) }}
    {% endfor %}
    {% for name in names %}
        {{ render_sponsor_popup(prefix + name, klass) }}
    {% endfor %}    
    <br/>
{%- endmacro %}

{% set talks = {65: {'url': 'http://in.pycon.org/funnel/2013/65-the-absolute-minimum-every-python-programmer-absolutely-positively-must-know-about-unicode', 'title': 'The Absolute Minimum Every Python Programmer Absolutely, Positively Must Know About Unicode', 'speaker': 'Vamsi Krishna'}, 4: {'url': 'http://in.pycon.org/funnel/2013/4-document-your-code-sphinx-workshop', 'title': 'Document your code (Sphinx workshop)', 'speaker': 'Kushal Das'}, 5: {'url': 'http://in.pycon.org/funnel/2013/5-functional-testing-using-selenium', 'title': 'Functional Testing Using Selenium', 'speaker': 'Baiju Muthukadan'}, 70: {'url': 'http://in.pycon.org/funnel/2013/70-lets-talk-testing-with-selenium', 'title': "Let's talk testing with Selenium", 'speaker': 'Anisha Narang'}, 71: {'url': 'http://in.pycon.org/funnel/2013/71-graph-everything', 'title': 'Graph Everything', 'speaker': 'Kunal Kerkar'}, 72: {'url': 'http://in.pycon.org/funnel/2013/72-advanced-data-analysis-with-pandas', 'title': 'Advanced data analysis with Pandas', 'speaker': 'Anand S'}, 73: {'url': 'http://in.pycon.org/funnel/2013/73-data-visualisation-in-powerpoint-with-python', 'title': 'Data visualisation in PowerPoint with Python', 'speaker': 'Anand S'}, 23: {'url': 'http://in.pycon.org/funnel/2013/23-idiomatic-programming-getting-the-best-out-of-your-python-code', 'title': 'Idiomatic Programming - Getting the best out of your Python code', 'speaker': 'Anand B Pillai'}, 76: {'url': 'http://in.pycon.org/funnel/2013/76-scaling-telephony-with-python-the-plivo-learnings', 'title': 'Scaling Telephony with Python: The Plivo Learnings', 'speaker': 'Nishad Musthafa'}, 78: {'url': 'http://in.pycon.org/funnel/2013/78-making-python-interactive-and-fun-using-ipython-notebook', 'title': 'Making python Interactive and fun using IPython notebook.', 'speaker': 'konark modi'}, 82: {'url': 'http://in.pycon.org/funnel/2013/82-applications-of-python-in-robotics', 'title': 'Applications of Python in Robotics', 'speaker': 'Lentin Joseph'}, 21: {'url': 'http://in.pycon.org/funnel/2013/21-python-in-raspberry-pi', 'title': 'Python in Raspberry Pi', 'speaker': 'Sudar Muthu'}, 86: {'url': 'http://in.pycon.org/funnel/2013/86-were-building-skynet-and-it-loves-python', 'title': "We're building Skynet and it loves Python!", 'speaker': 'Dhananjay Sathe'}, 87: {'url': 'http://in.pycon.org/funnel/2013/87-rapid-development-integration-of-real-time-communication-in-websites', 'title': 'Rapid development & integration of Real Time Communication in Websites', 'speaker': 'Chetan'}, 88: {'url': 'http://in.pycon.org/funnel/2013/88-predicting-black-swan-events', 'title': 'Predicting Black Swan Events', 'speaker': 'Michael McKerns'}, 29: {'url': 'http://in.pycon.org/funnel/2013/29-dissecting-memory-mysteries-of-python', 'title': 'Dissecting memory mysteries of Python', 'speaker': 'Vishal Kanaujia'}, 93: {'url': 'http://in.pycon.org/funnel/2013/93-logging-on-steroids-how-we-manage-logs-at-inmobi', 'title': 'Logging on Steroids - How we manage logs at Inmobi', 'speaker': 'Ajay Yadav'}, 31: {'url': 'http://in.pycon.org/funnel/2013/31-distributed-task-processing-using-celery', 'title': 'Distributed task processing using Celery', 'speaker': 'Narahari Allamraju'}, 32: {'url': 'http://in.pycon.org/funnel/2013/32-implementation-of-pycuda', 'title': 'Implementation of pyCUDA', 'speaker': 'Aditya Atluri'}, 34: {'url': 'http://in.pycon.org/funnel/2013/34-openstack-workshop-covering-intro-to-basics-and-installation', 'title': 'Openstack Workshop covering Intro to Basics and Installation', 'speaker': 'Rahul Krishna Upadhyaya'}, 36: {'url': 'http://in.pycon.org/funnel/2013/36-internet-of-things-arduino-3-python', 'title': 'Internet of things - Arduino <3 Python', 'speaker': 'Priya Kuber'}, 101: {'url': 'http://in.pycon.org/funnel/2013/101-python-for-penetration-testers-how-to-stop-worrying-about-tools-start-scripting', 'title': 'Python for Penetration Testers: How to stop worrying about tools & start scripting', 'speaker': 'Bharath'}, 103: {'url': 'http://in.pycon.org/funnel/2013/103-experiments-in-data-mining-entity-disambiguation-and-how-to-think-data-structures-for-designing-beautiful-algorithms', 'title': 'Experiments in data mining, entity disambiguation and how to think data-structures for designing beautiful algorithms', 'speaker': 'Ekta Grover'}, 43: {'url': 'http://in.pycon.org/funnel/2013/43-scrape-the-web-using-scrapy', 'title': 'Scrape the web using Scrapy', 'speaker': 'Anuvrat Parashar'}, 44: {'url': 'http://in.pycon.org/funnel/2013/44-chugging-flask-gyaan-from-building-rest-apis-for-an-android-app', 'title': 'Chugging Flask: Gyaan from building REST APIs for an Android App', 'speaker': 'Aravind Krishnaswamy'}, 45: {'url': 'http://in.pycon.org/funnel/2013/45-build-your-next-python-project-super-fast-distributed-and-infinitely-scalable-using-zeromq', 'title': 'Build your next python project - Super fast, distributed and infinitely scalable, Using ZeroMQ', 'speaker': 'Srinivasan R'}, 46: {'url': 'http://in.pycon.org/funnel/2013/46-introduction-to-scikit-learn-machine-learning-in-python', 'title': 'Introduction to scikit-learn: Machine Learning in Python', 'speaker': 'Bala Subrahmanyam Varanasi'}, 47: {'url': 'http://in.pycon.org/funnel/2013/47-when-to-optimize-code-performance-and-memory-optimizations-in-python', 'title': 'When to Optimize code? Performance and Memory Optimizations in Python.', 'speaker': 'Venkata Ramana'}, 51: {'url': 'http://in.pycon.org/funnel/2013/51-test-your-code', 'title': 'Test your code', 'speaker': 'Ratnadeep Debnath'}, 53: {'url': 'http://in.pycon.org/funnel/2013/53-ansible-configuration-management-simplified', 'title': 'Ansible: Configuration Management Simplified', 'speaker': 'Ausmarton Zarino Fernandes'}, 54: {'url': 'http://in.pycon.org/funnel/2013/54-package-and-distribute-your-python-code', 'title': 'Package and distribute your Python code', 'speaker': 'Sanket Saurav'}, 59: {'url': 'http://in.pycon.org/funnel/2013/59-django-beyond-basics', 'title': 'Django: Beyond Basics', 'speaker': 'Arun Ravindran'}, 61: {'url': 'http://in.pycon.org/funnel/2013/61-real-time-stream-computation-on-graphs-using-storm-neo4j-and-python', 'title': 'Real-Time stream computation on graphs using Storm, Neo4j and Python', 'speaker': 'Sonal Raj'}}
 %}

{% macro render_talk(id) -%}
    {% set talk = talks[id] %}
    <div class="talk">
      <a class="title" href="{{talk['url']}}">{{ talk['title'] }}</a><br/>
      <a class="speaker" href="{{talk['url']}}">{{ talk['speaker'] }}</a>
    </div>
{%- endmacro %}


{% macro render_talk_mobile(id, audi) -%}
    {% set talk = talks[id] %}
    <tr class="talk">
      <td>
        <a class="title" href="{{talk['url']}}">{{ talk['title'] }}</a><br/>
        <a class="speaker" href="{{talk['url']}}">{{ talk['speaker'] }}</a>
        <div class="audi">{{audi}}</div>
      </td>
    </tr>
{%- endmacro %}

